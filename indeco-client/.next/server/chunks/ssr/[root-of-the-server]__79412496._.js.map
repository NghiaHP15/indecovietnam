{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///D:/D%E1%BB%B1%20%C3%81n/indecovietnam/indecovietnam/indeco-client/src/components/ProductDetailClient.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ProductDetailClient.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ProductDetailClient.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0S,GACvU,wEACA","debugId":null}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///D:/D%E1%BB%B1%20%C3%81n/indecovietnam/indecovietnam/indeco-client/src/components/ProductDetailClient.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ProductDetailClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ProductDetailClient.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAsR,GACnT,oDACA","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///D:/D%E1%BB%B1%20%C3%81n/indecovietnam/indecovietnam/indeco-client/src/lib/axiosClient.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { Result } from \"@/constants/common\";\r\nimport axios, { AxiosError, AxiosRequestConfig } from \"axios\";\r\n\r\n// ======== Biến toàn cục ========\r\nlet isRefreshing = false;\r\nlet failedQueue: {\r\n    resolve: (token: string) => void;\r\n    reject: (error: AxiosError) => void;\r\n}[] = [];\r\n\r\n// ======== Hàm xử lý queue ========\r\nconst processQueue = (error: AxiosError | null, token: string | null = null) => {\r\n    failedQueue.forEach(prom => {\r\n        if (token) prom.resolve(token);\r\n        else prom.reject(error!);\r\n    });\r\n    failedQueue = [];\r\n};\r\n\r\n// ======== Hàm decode JWT ========\r\nconst parseJwt = (token: string): any => {\r\n    try {\r\n        return JSON.parse(atob(token.split(\".\")[1]));\r\n    } catch {\r\n        return null;\r\n    }\r\n};\r\n\r\n// ======== Hàm refresh token ========\r\nconst refreshAccessToken = async (): Promise<string | null> => {\r\n    try {\r\n        const response = await axios.post<Result<{ accessToken: string }>>(\r\n            `${process.env.NEXT_PUBLIC_API_URL}customer/refresh-token`,\r\n            {},\r\n            { withCredentials: true }\r\n        );\r\n        const newToken = response.data.data?.accessToken;\r\n        if (newToken) {\r\n            localStorage.setItem(\"accessToken\", newToken);\r\n            axiosClient.defaults.headers.Authorization = `Bearer ${newToken}`;\r\n        }\r\n        return newToken || null;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n};\r\n\r\n// ======== Axios instance ========\r\nconst axiosClient = axios.create({\r\n    baseURL: process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000/api\",\r\n    timeout: 50000,\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    withCredentials: true,\r\n});\r\n\r\n// ======== Request Interceptor ========\r\naxiosClient.interceptors.request.use(\r\n    async (config) => {\r\n        const requiresAuth = (config as AxiosRequestConfig & { requiresAuth?: boolean }).requiresAuth;\r\n        if (!requiresAuth) return config;\r\n\r\n        if (typeof window === \"undefined\") return config;\r\n\r\n        const token = localStorage.getItem(\"accessToken\");\r\n        if (!token) return config;\r\n\r\n        // Check token expiration\r\n        const payload = parseJwt(token);\r\n        const now = Date.now() / 1000;\r\n        if (payload?.exp && now >= payload.exp - 60) { // refresh trước 60s\r\n            if (isRefreshing) {\r\n                // Nếu đang refresh, đợi token mới\r\n                const newToken = await new Promise<string>((resolve, reject) => {\r\n                    failedQueue.push({ resolve, reject });\r\n                });\r\n                config.headers.Authorization = `Bearer ${newToken}`;\r\n                return config;\r\n            }\r\n\r\n            isRefreshing = true;\r\n            const newToken = await refreshAccessToken();\r\n            isRefreshing = false;\r\n\r\n            if (newToken) {\r\n                processQueue(null, newToken);\r\n                config.headers.Authorization = `Bearer ${newToken}`;\r\n            } else {\r\n                processQueue(new AxiosError(\"Refresh token failed\"), null);\r\n            }\r\n        } else {\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n        return config;\r\n    },\r\n    (error) => Promise.reject(error)\r\n);\r\n\r\n// ======== Response Interceptor (fallback khi vẫn bị 401) ========\r\naxiosClient.interceptors.response.use(\r\n    (response) => response,\r\n    async (error: AxiosError) => {\r\n        const originalRequest = error.config as AxiosRequestConfig & { _retry?: boolean };\r\n\r\n        if (error.response?.status === 401 && !originalRequest._retry) {\r\n            originalRequest._retry = true;\r\n\r\n            if (isRefreshing) {\r\n                return new Promise((resolve, reject) => {\r\n                    failedQueue.push({ resolve, reject });\r\n                }).then((token) => {\r\n                    if (originalRequest.headers) {\r\n                        originalRequest.headers.Authorization = `Bearer ${token}`;\r\n                    }\r\n                    return axiosClient(originalRequest);\r\n                });\r\n            }\r\n\r\n            isRefreshing = true;\r\n            const newToken = await refreshAccessToken();\r\n            isRefreshing = false;\r\n\r\n            if (newToken) {\r\n                processQueue(null, newToken);\r\n                if (originalRequest.headers) {\r\n                    originalRequest.headers.Authorization = `Bearer ${newToken}`;\r\n                }\r\n                return axiosClient(originalRequest);\r\n            } else {\r\n                processQueue(error, null);\r\n            }\r\n        }\r\n\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default axiosClient;\r\n"],"names":[],"mappings":"AAAA,oDAAoD,GACpD,qDAAqD;;;AAErD;;AAEA,kCAAkC;AAClC,IAAI,eAAe;AACnB,IAAI,cAGE,EAAE;AAER,oCAAoC;AACpC,MAAM,eAAe,CAAC,OAA0B,QAAuB,IAAI;IACvE,YAAY,OAAO,CAAC,CAAA;QAChB,IAAI,OAAO,KAAK,OAAO,CAAC;aACnB,KAAK,MAAM,CAAC;IACrB;IACA,cAAc,EAAE;AACpB;AAEA,mCAAmC;AACnC,MAAM,WAAW,CAAC;IACd,IAAI;QACA,OAAO,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE;IAC9C,EAAE,OAAM;QACJ,OAAO;IACX;AACJ;AAEA,sCAAsC;AACtC,MAAM,qBAAqB;IACvB,IAAI;QACA,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAC7B,0EAAmC,sBAAsB,CAAC,EAC1D,CAAC,GACD;YAAE,iBAAiB;QAAK;QAE5B,MAAM,WAAW,SAAS,IAAI,CAAC,IAAI,EAAE;QACrC,IAAI,UAAU;YACV,aAAa,OAAO,CAAC,eAAe;YACpC,YAAY,QAAQ,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,UAAU;QACrE;QACA,OAAO,YAAY;IACvB,EAAE,OAAO,OAAO;QACZ,OAAO;IACX;AACJ;AAEA,mCAAmC;AACnC,MAAM,cAAc,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC7B,SAAS,0EAAmC;IAC5C,SAAS;IACT,SAAS;QAAE,gBAAgB;IAAmB;IAC9C,iBAAiB;AACrB;AAEA,wCAAwC;AACxC,YAAY,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,OAAO;IACH,MAAM,eAAe,AAAC,OAA2D,YAAY;IAC7F,IAAI,CAAC,cAAc,OAAO;IAE1B,wCAAmC,OAAO;;IAE1C,MAAM;IAGN,yBAAyB;IACzB,MAAM;IACN,MAAM;AAyBV,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG9B,mEAAmE;AACnE,YAAY,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,OAAO;IACH,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC3D,gBAAgB,MAAM,GAAG;QAEzB,IAAI,cAAc;YACd,OAAO,IAAI,QAAQ,CAAC,SAAS;gBACzB,YAAY,IAAI,CAAC;oBAAE;oBAAS;gBAAO;YACvC,GAAG,IAAI,CAAC,CAAC;gBACL,IAAI,gBAAgB,OAAO,EAAE;oBACzB,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;gBAC7D;gBACA,OAAO,YAAY;YACvB;QACJ;QAEA,eAAe;QACf,MAAM,WAAW,MAAM;QACvB,eAAe;QAEf,IAAI,UAAU;YACV,aAAa,MAAM;YACnB,IAAI,gBAAgB,OAAO,EAAE;gBACzB,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,UAAU;YAChE;YACA,OAAO,YAAY;QACvB,OAAO;YACH,aAAa,OAAO;QACxB;IACJ;IAEA,OAAO,QAAQ,MAAM,CAAC;AAC1B;uCAGW","debugId":null}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///D:/D%E1%BB%B1%20%C3%81n/indecovietnam/indecovietnam/indeco-client/src/lib/APIClient.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { AxiosRequestConfig, AxiosError, AxiosResponse } from 'axios';\r\nimport axiosInstance from './axiosClient';\r\nimport { Result } from '@/constants/common';\r\n\r\nclass APIClient {\r\n  get<T = any>(config: AxiosRequestConfig): Promise<T> {\r\n    return this.request<T>({ ...config, method: 'GET' });\r\n  }\r\n\r\n  post<T = any>(config: AxiosRequestConfig): Promise<T> {\r\n    return this.request<T>({ ...config, method: 'POST' });\r\n  }\r\n\r\n  put<T = any>(config: AxiosRequestConfig): Promise<T> {\r\n    return this.request<T>({ ...config, method: 'PUT' });\r\n  }\r\n\r\n  delete<T = any>(config: AxiosRequestConfig): Promise<T> {\r\n    return this.request<T>({ ...config, method: 'DELETE' });\r\n  }\r\n\r\n  request<T = any>(config: AxiosRequestConfig): Promise<T> {\r\n    return new Promise((resolve, reject) => {\r\n      axiosInstance\r\n        .request<any, AxiosResponse<Result>>(config)\r\n        .then((res: AxiosResponse<Result>) => {\r\n          resolve(res as unknown as Promise<T>);\r\n        })\r\n        .catch((e: Error | AxiosError) => {\r\n          reject(e);\r\n        });\r\n    });\r\n  }\r\n}\r\n\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default new APIClient();"],"names":[],"mappings":"AAAA,qDAAqD;;;AAErD;;AAGA,MAAM;IACJ,IAAa,MAA0B,EAAc;QACnD,OAAO,IAAI,CAAC,OAAO,CAAI;YAAE,GAAG,MAAM;YAAE,QAAQ;QAAM;IACpD;IAEA,KAAc,MAA0B,EAAc;QACpD,OAAO,IAAI,CAAC,OAAO,CAAI;YAAE,GAAG,MAAM;YAAE,QAAQ;QAAO;IACrD;IAEA,IAAa,MAA0B,EAAc;QACnD,OAAO,IAAI,CAAC,OAAO,CAAI;YAAE,GAAG,MAAM;YAAE,QAAQ;QAAM;IACpD;IAEA,OAAgB,MAA0B,EAAc;QACtD,OAAO,IAAI,CAAC,OAAO,CAAI;YAAE,GAAG,MAAM;YAAE,QAAQ;QAAS;IACvD;IAEA,QAAiB,MAA0B,EAAc;QACvD,OAAO,IAAI,QAAQ,CAAC,SAAS;YAC3B,yHAAA,CAAA,UAAa,CACV,OAAO,CAA6B,QACpC,IAAI,CAAC,CAAC;gBACL,QAAQ;YACV,GACC,KAAK,CAAC,CAAC;gBACN,OAAO;YACT;QACJ;IACF;AACF;uCAIe,IAAI","debugId":null}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///D:/D%E1%BB%B1%20%C3%81n/indecovietnam/indecovietnam/indeco-client/src/services/productService.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport APIClient from \"@/lib/APIClient\";\r\n\r\nexport enum ProductApi {\r\n  getAllProduct = \"/product\",\r\n}\r\n\r\nconst getAllProducts = async ({ params }: { params: any}) => await APIClient.get({ url: ProductApi.getAllProduct, params });\r\nconst getProductBySlug = async (slug: string) => await APIClient.get({ url: `${ProductApi.getAllProduct}/slug/${slug}` });\r\nconst getViews = async (id: string) => await APIClient.get({ url: `${ProductApi.getAllProduct}/view/${id}` });\r\n\r\nexport { \r\n    getAllProducts,\r\n    getProductBySlug,\r\n    getViews\r\n}"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;AACrD;;AAEO,IAAA,AAAK,oCAAA;;WAAA;;AAIZ,MAAM,iBAAiB,OAAO,EAAE,MAAM,EAAkB,GAAK,MAAM,uHAAA,CAAA,UAAS,CAAC,GAAG,CAAC;QAAE,GAAG;QAA4B;IAAO;AACzH,MAAM,mBAAmB,OAAO,OAAiB,MAAM,uHAAA,CAAA,UAAS,CAAC,GAAG,CAAC;QAAE,KAAK,cAA4B,MAAM,EAAE,MAAM;IAAC;AACvH,MAAM,WAAW,OAAO,KAAe,MAAM,uHAAA,CAAA,UAAS,CAAC,GAAG,CAAC;QAAE,KAAK,cAA4B,MAAM,EAAE,IAAI;IAAC","debugId":null}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///D:/D%E1%BB%B1%20%C3%81n/indecovietnam/indecovietnam/indeco-client/src/app/product/%5Bslug%5D/page.tsx"],"sourcesContent":["import ProductDetailClient from \"@/components/ProductDetailClient\";\r\nimport { getProductBySlug } from \"@/services/productService\";\r\nimport { Metadata } from \"next\";\r\n\r\ntype Props = {\r\n  params: Promise<{ slug: string }>;\r\n};\r\n\r\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\r\n  const { slug } = await params;\r\n\r\n  // Gọi API lấy chi tiết sản phẩm\r\n  const product = await getProductBySlug(slug);\r\n\r\n  if (!product?.data?.data) {\r\n    return {\r\n      title: \"Sản phẩm không tồn tại | Indeco VietNam\",\r\n      description: \"Trang này không tìm thấy hoặc đã bị xoá.\",\r\n      robots: { index: false, follow: false },\r\n    };\r\n  }\r\n\r\n  const { name, description, image } = product?.data?.data;\r\n  console.log(product);\r\n  \r\n\r\n  const url = `${process.env.NEXT_PUBLIC_SITE_URL}/product/${slug}`;\r\n  const imageSeo = image;\r\n\r\n  return {\r\n    title: `${name} | Indeco VietNam`,\r\n    description: description?.slice(0, 160) || `Tìm hiểu chi tiết về ${name} tại Indeco VietNam.`,\r\n    keywords: [name, \"sản phẩm nội thất\", \"Indeco VietNam\"],\r\n    alternates: {\r\n      canonical: url,\r\n    },\r\n    openGraph: {\r\n      title: name,\r\n      description,\r\n      url,\r\n      siteName: \"Indeco VietNam\",\r\n      images: [\r\n        {\r\n          url: imageSeo,\r\n          width: 1200,\r\n          height: 630,\r\n          alt: name,\r\n        },\r\n      ],\r\n      locale: \"vi_VN\",\r\n      type: \"website\", // khác blog -> product\r\n    },\r\n    twitter: {\r\n      card: \"summary_large_image\",\r\n      title: name,\r\n      description,\r\n      images: [imageSeo],\r\n    },\r\n    robots: {\r\n      index: true,\r\n      follow: true,\r\n    },\r\n  };\r\n}\r\n\r\nconst ProductDetailPage =  async ({ params }: {params: Promise<{ roomslug: string; categoryslug: string; slug: string }>}) => {\r\n  const { slug } = await params;\r\n\r\n  return <ProductDetailClient slug={slug} />;\r\n};\r\n\r\nexport default ProductDetailPage;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAOO,eAAe,iBAAiB,EAAE,MAAM,EAAS;IACtD,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IAEvB,gCAAgC;IAChC,MAAM,UAAU,MAAM,CAAA,GAAA,iIAAA,CAAA,mBAAgB,AAAD,EAAE;IAEvC,IAAI,CAAC,SAAS,MAAM,MAAM;QACxB,OAAO;YACL,OAAO;YACP,aAAa;YACb,QAAQ;gBAAE,OAAO;gBAAO,QAAQ;YAAM;QACxC;IACF;IAEA,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,GAAG,SAAS,MAAM;IACpD,QAAQ,GAAG,CAAC;IAGZ,MAAM,MAAM,6DAAoC,SAAS,EAAE,MAAM;IACjE,MAAM,WAAW;IAEjB,OAAO;QACL,OAAO,GAAG,KAAK,iBAAiB,CAAC;QACjC,aAAa,aAAa,MAAM,GAAG,QAAQ,CAAC,qBAAqB,EAAE,KAAK,oBAAoB,CAAC;QAC7F,UAAU;YAAC;YAAM;YAAqB;SAAiB;QACvD,YAAY;YACV,WAAW;QACb;QACA,WAAW;YACT,OAAO;YACP;YACA;YACA,UAAU;YACV,QAAQ;gBACN;oBACE,KAAK;oBACL,OAAO;oBACP,QAAQ;oBACR,KAAK;gBACP;aACD;YACD,QAAQ;YACR,MAAM;QACR;QACA,SAAS;YACP,MAAM;YACN,OAAO;YACP;YACA,QAAQ;gBAAC;aAAS;QACpB;QACA,QAAQ;YACN,OAAO;YACP,QAAQ;QACV;IACF;AACF;AAEA,MAAM,oBAAqB,OAAO,EAAE,MAAM,EAA+E;IACvH,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IAEvB,qBAAO,8OAAC,yIAAA,CAAA,UAAmB;QAAC,MAAM;;;;;;AACpC;uCAEe","debugId":null}}]
}